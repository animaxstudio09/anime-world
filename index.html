<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANIMAX QUEEN | RJ ROCKY</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root { --bg: #060606; --primary: #e50914; --gold: #ffd700; --card: #141414; }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--bg); color: #fff; }

        /* Navigation */
        nav { padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; background: #000; position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid #222; }
        .logo { color: var(--primary); font-size: 24px; font-weight: 800; letter-spacing: 1px; }
        
        /* Queen Profile Icon */
        .profile-trigger { position: relative; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .profile-trigger img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--gold); padding: 2px; }

        /* Hidden Profile Dashboard */
        .profile-dashboard { 
            position: absolute; top: 60px; right: 0; background: #1a1a1a; width: 250px; 
            border-radius: 15px; border: 1px solid var(--gold); padding: 20px; 
            display: none; flex-direction: column; align-items: center; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.8); z-index: 2000;
        }
        .profile-dashboard.active { display: flex; animation: fadeIn 0.3s ease; }
        .profile-dashboard img { width: 70px; height: 70px; border-radius: 50%; border: 3px solid var(--gold); margin-bottom: 10px; }
        .profile-dashboard h3 { margin: 5px 0; font-size: 16px; color: #fff; }
        .profile-dashboard p { margin: 0; font-size: 12px; color: #aaa; margin-bottom: 15px; }
        .badge { background: var(--gold); color: #000; padding: 3px 12px; border-radius: 20px; font-size: 10px; font-weight: bold; margin-bottom: 20px; }

        .dash-btn { width: 100%; padding: 10px; margin-top: 5px; border-radius: 8px; border: none; background: #333; color: #fff; cursor: pointer; font-size: 13px; font-weight: 600; }
        .logout-btn { background: var(--primary); margin-top: 15px; }

        /* Content Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; padding: 20px 5%; }
        .card { background: var(--card); border-radius: 10px; overflow: hidden; cursor: pointer; position: relative; border: 1px solid #222; transition: 0.3s; }
        .card:hover { transform: scale(1.05); border-color: var(--gold); }
        .card img { width: 100%; height: 230px; object-fit: cover; }
        .card h3 { padding: 10px; font-size: 13px; margin: 0; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        #login-screen { height: 100vh; display: none; flex-direction: column; justify-content: center; align-items: center; background: radial-gradient(circle, #222, #000); }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1 style="color:var(--primary); font-size: 50px;">ANIMAX</h1>
        <button onclick="signIn()" style="padding:15px 40px; background:var(--primary); color:#fff; border:none; border-radius:30px; font-weight:bold; cursor:pointer;">LOGIN WITH GOOGLE</button>
    </div>

    <div id="main-app" style="display:none;">
        <nav>
            <div class="logo">ANIMAX</div>
            <div class="profile-trigger" onclick="toggleDashboard()">
                <img id="nav-user-img" src="" alt="User">
                <div class="profile-dashboard" id="dash">
                    <img id="dash-user-img" src="" alt="User">
                    <h3 id="user-name">User Name</h3>
                    <p id="user-email">user@gmail.com</p>
                    <div class="badge">QUEEN MEMBER</div>
                    <button class="dash-btn" onclick="window.open('https://t.me/aminezone09')">Contact Admin</button>
                    <button class="dash-btn logout-btn" onclick="signOut()">Logout Account</button>
                </div>
            </div>
        </nav>

        <div class="grid" id="anime-list"></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBcWE5TCxamMSnJxqSm5X4mgSwSccIXcBI",
            authDomain: "myanimeapp-8d079.firebaseapp.com",
            databaseURL: "https://myanimeapp-8d079-default-rtdb.firebaseio.com",
            projectId: "myanimeapp-8d079",
            storageBucket: "myanimeapp-8d079.firebasestorage.app",
            messagingSenderId: "37482342893",
            appId: "1:37482342893:web:bebc7352e4bc102b725fe4"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        function signIn() {
            auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
        }

        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                
                // প্রোফাইল ডাটা সেট
                document.getElementById('nav-user-img').src = user.photoURL;
                document.getElementById('dash-user-img').src = user.photoURL;
                document.getElementById('user-name').innerText = user.displayName;
                document.getElementById('user-email').innerText = user.email;

                loadVideos();
            } else {
                document.getElementById('login-screen').style.display = 'flex';
                document.getElementById('main-app').style.display = 'none';
            }
        });

        function loadVideos() {
            db.ref('anime').on('value', snap => {
                const list = document.getElementById('anime-list');
                list.innerHTML = "";
                snap.forEach(child => {
                    const val = child.val();
                    list.innerHTML += `<div class="card"><img src="${val.thumbnail}"><h3>${val.title}</h3></div>`;
                });
            });
        }

        function toggleDashboard() {
            document.getElementById('dash').classList.toggle('active');
        }

        // ড্যাশবোর্ডের বাইরে ক্লিক করলে বন্ধ হবে
        window.onclick = function(event) {
            if (!event.target.closest('.profile-trigger')) {
                document.getElementById('dash').classList.remove('active');
            }
        }

        function signOut() { auth.signOut(); }
    </script>
</body>
</html>
